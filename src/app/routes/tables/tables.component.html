<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Permissions</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="" id="table-perm-modal-alert-dialog"></div>
        <div class="row">
          <label>
            Minimum permission level:
            <select size="1" class="form-control" id="table-perm-min-select" (change)="onMinPermLvlChange()" #permlvlSelect>
              <option *ngFor="let el of perm_lvls">{{el}}</option>
            </select>
          </label>
          <button style="margin-left: 1em; margin-top: 1.5em;" class="btn btn-primary disabled modified-btn" id="table-update-btn" (click)="updateMinPermlvl(permlvlSelect.value)" disabled>update</button>
        </div>
      </div>
      <div class="modal-footer">
        <div *ngFor="let group of permGroups" class="perm-field"
             [style]="'background-color: rgba(' + group.color + ', 0.815); box-shadow: 2px 2px 2px 2px rgba(' + group.color + ',1);'">{{group.name}}</div>
      </div>
    </div>
  </div>
</div>

<div class="wrapper">
  <div class="content-wrapper">
<app-sidebar active="tables"></app-sidebar>
  <div class="content">
    <div class="container">
      <div class="row">
        <h1>All tables</h1>
        <a class="btn btn-primary modified-btn" routerLink="/new-table">new</a>
      </div>
      <div class="" id="tables-alert-dialog"></div>
      <div class="table-wrapper-scroll-y my-custom-scrollbar">

        <table class="table table-bordered table-striped mb-0">
          <thead>
          <tr>
            <th scope="col">name</th>
            <th scope="col">entries</th>
            <th scope="col">created at</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let table of tables">
            <td>{{table.name}}</td>
            <td>{{table.entries}}</td>
            <td>{{table.created_at}}</td>
            <td>
              <button class="btn btn-primary" (click)="openTable(table.name)">open</button>
              <button class="btn btn-danger" (click)="deleteTable(table.name)" style="margin-left: 1em;">delete</button>
              <button class="btn btn-success" style="margin-left: 1em;" data-toggle="modal" data-target="#exampleModal" (click)="loadPermissions(table.name, table.min_perm_lvl)">permissions</button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  </div>
</div>
